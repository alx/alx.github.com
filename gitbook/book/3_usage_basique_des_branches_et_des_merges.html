<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>Git Book - Usage Basique des Branches et des Merges</title>
	<meta http-equiv="content-language" content="en">
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="icon" href="favicon.png" type="image/png">
	<link rel="stylesheet" href="assets/blueprint/screen.css" type="text/css" media="screen, projection">
  <link rel="stylesheet" href="assets/blueprint/print.css" type="text/css" media="print">
  <!--[if IE]><link rel="stylesheet" href="assets/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->
	<link rel="stylesheet" href="assets/stylesheets/mac_classic.css" type="text/css" media="screen, projection">
	<link rel="stylesheet" href="assets/stylesheets/style.css" type="text/css" media="screen, projection">
</head>

<body>
<div class="container chapter showgrids">

  <div class="span-21 header">
    <div class="nav"><a href="3_workflow_normal.html">Prev</a>  <a href="3_analyser_l'historique_-_git_log.html">Next</a></div>
    <div class="title"><a href='index.html'>Git Community Book</a></div>
  </div>
  
  <div class="span-21">
    <br/>
  </div>
  
  <div class="span-21">
    <h2>Usage Basique des Branches et des Merges </h2>

<p>Un seul dépôt git peut maintenir de nombreuses branches de
développement. Pour créer une nouvelle branche nommée
"experimental", utilisez:</p>

<pre><code>$ git branch experimental
</code></pre>

<p>Si vous lancez maintenant</p>

<pre><code>$ git branch
</code></pre>

<p>Vous obtiendrez la liste de toutes les branches existantes:</p>

<pre><code>  experimental
* master
</code></pre>

<p>La branche "experimental" est celle que vous venez de créer,
et la branche "master" est la branche par défaut qui a été
créée automatiquement pour vous. L'astérisque signale la
branche su laquelle vous vous trouvez. Tapez:</p>

<pre><code>$ git checkout experimental
</code></pre>

<p>pour passer sur la branche "experimental". Éditez maintenant
un fichier, committer le changement, et revenez sur la
branche "master":</p>

<pre><code>(éditer un fichier)
$ git commit -a
$ git checkout master
</code></pre>

<p>Vous pouvez vérifier que le changement que vous venez de
faire n'est plus visible, puisqu'il a été fait sur la branche
"experimental" et que nous sommes revenus sur la branche
"master".</p>

<p>Vous pouvez faire un changement différent sur la branche
"master":</p>

<pre><code>(éditer un fichier)
$ git commit -a
</code></pre>

<p>à cet instant, les 2 branches ont divergé, avec des changements
différents faits dans chacune d'elles. Pour fusionner (merger)
les changements effectués dans la branche "experimental" sur
la branche "master", lancez:</p>

<pre><code>$ git merge experimental
</code></pre>

<p>Si les changements ne créent pas de conflit, vous avez fini.
S'il y a des conflits, un marquage sera laissé dans les fichiers
problématiques pour vous montrer le conflit:</p>

<pre><code>$ git diff
</code></pre>

<p>vous montrera ces marquages. Une fois que vous aurez édité les
fichiers pour résoudre les conflits,</p>

<pre><code>$ git commit -a
</code></pre>

<p>committera le résultat du merge. Enfin,</p>

<pre><code>$ gitk
</code></pre>

<p>vous montrera une jolie représentation graphique de l'historique
obtenu.</p>

<p>Maintenant, vous pouvez effacer la branche "experimental" avec</p>

<pre><code>$ git branch -d experimental
</code></pre>

<p>Cette commande s'assure que les changement de la branche
"experimental" se trouve dans la branche courante.</p>

<p>Si vous développez une idée folle, puis le regrettez, vous
pouvez toujours effacer cette branche avec:</p>

<pre><code>$ git branch -D crazy-idea
</code></pre>

<p>Les branches sont faciles et peu coûteuse, donc c'est un bon
moyen pour tester des choses nouvelles.</p>

<h3>Comment merger </h3>

<p>Vous pouvez joindre 2 branches de développement divergentes
en utilisant <a href="http://www.kernel.org/pub/software/scm/git/docs/git-merge.html">git merge</a>:</p>

<pre><code>$ git merge titrebranche
</code></pre>

<p>merge les changements fait dans la branche "titrebranche" dans la
branche courante. Si il y a des conflits--par exemple, si le
même fichier est modifié au même endroit de 2 façons différente
dans la branche distante et la branche locale--vous serez avertis;
l'avertissement peut ressembler à quelque chose comme ça:</p>

<pre><code>$ git merge next
 100% (4/4) done
Auto-merged file.txt
CONFLICT (content): Merge conflict in file.txt
Automatic merge failed; fix conflicts and then commit the result.
</code></pre>

<p>des marqueurs de conflit sont ajoutés aux fichiers problématiques,
et après avoir résolu les conflits manuellement, vous pouvez
mettre à jour l'index avec le nouveau contenu et lancer 
<code>git commit</code>, comme vous le feriez quand vous modifiez un
fichier.</p>

<p>Si vous analysez le résultat de ce commit avec gitk, vous verrez
qu'il à 2 parents: l'un pointant vers le sommet de la branche
courante, et l'autre pointant vers le sommet de l'autre branche.</p>

<h3>Résoudre un merge </h3>

<p>Quand un merge n'est pas résolu automatiquement, git laisse l'index
et le "tree" de travail dans un état spécial vous donnant toutes
les informations dont vous aurez besoin pour vous aider à résoudre
le merge.</p>

<p>Les fichiers en conflits sont marqués spécialement dans l'index,
donc jusqu'à que vous ayez résolu le problème et mis à jour
l'index, <a href="http://www.kernel.org/pub/software/scm/git/docs/git-commit.html">git commit</a> ne fonctionnera pas:</p>

<pre><code>$ git commit
file.txt: needs merge
</code></pre>

<p>De plus, <a href="http://www.kernel.org/pub/software/scm/git/docs/git-status.html">git status</a> vous donnera la liste de ces
fichiers "non-mergés", et les fichiers contenant des conflits
auront ces conflits marqués comme ceci:</p>

<pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:file.txt
Hello world
=======
Goodbye
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 77976da35a11db4580b80ae27e8d65caf5208086:file.txt
</code></pre>

<p>Vous n'avez plus qu'à éditer ces fichier pour résoudre les conflits,
puis:</p>

<pre><code>$ git add file.txt
$ git commit
</code></pre>

<p>Notez que le message du commit sera déjà rempli pour vous avec
quelques informations à propos du merge. Normalement vous pouvez
juste laisser ce message inchangé, mais vous voudrez peut être
ajouter un commentaire additionnel si vous les désirez.</p>

<p>Cette partie contient tout ce que vous avec besoin de savoir pour
résoudre un merge simple. Mais git vous fournira aussi plus
d'information pour vous aider à résoudre les conflits:</p>

<h3>Annuler un merge </h3>

<p>Si vous êtes bloqués et décidés de laisser tomber en jetant tout vos
brouillons par la fenêtre, vous pouvez toujours revenir à l'état
où vous vous trouviez avant le merge avec la commande:</p>

<pre><code>$ git reset --hard HEAD
</code></pre>

<p>Ou, si vous avez déjà committé le merge que vous voulez balancer,</p>

<pre><code>$ git reset --hard ORIG_HEAD
</code></pre>

<p>Cependant, cette dernière commande peut être dangereuse dans certains
cas--ne balancez jamais un commit si ce commit était lui même le merge
d'une autre branche, en faisant ça vous risqueriez de rendre confus
les prochains merges.</p>

<h3>Avance rapide des merges </h3>

<p>Il y a un cas spécial non-mentionné plus tôt, qui est traité différemment.
Normalement, un merge est un commit avec 2 parents, un pour chacune des
2 lignes de développement qui seront mergées.</p>

<p>Cependant, si la branche courante n'a pas divergé de l'autres--donc tous
les commit présent dans la branche courant sont déjà contenus dans l'autre
branche--alors git ne fait qu'une "avance rapide"; le sommet (head) de la
branche courante est avancé jusqu'au point du sommet de la branche à
merger, sans qu'aucun commit ne soit créé.</p>

<p><div class="gitcast">
        <embed src="http://gitcasts.com/flowplayer/FlowPlayerLight.swf?config=%7Bembedded%3Atrue%2CbaseURL%3A%27http%3A%2F%2Fgitcasts%2Ecom%2Fflowplayer%27%2CvideoFile%3A%27http%3A%2F%2Fmedia%2Egitcasts%2Ecom%2Fc6-branch-merge%2Eflv%27%2CautoBuffering%3Afalse%2CautoPlay%3Afalse%7D" width="620" height="445" scale="noscale" bgcolor="111111" type="application/x-shockwave-flash" allowFullScreen="true" allowScriptAccess="always" allowNetworking="all" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed>
        <br>"GitCast #6: Branching and Merging"
        </div></p>


  </div>
  
  <div class="span-21">
    <hr/>
    <div class="center"><a href="3_workflow_normal.html">Prev</a>  <a href="3_analyser_l'historique_-_git_log.html">Next</a></div>
    <hr/>
  </div>
  
  <div class="span-17 footer">
  	<div class="menu">
  		This book is maintained by Scott Chacon, and hosting is donated by GitHub.
  		<br>
  		Please email me at <a href="mailto:schacon@gmail.com">schacon@gmail.com</a>
  		with patches, suggestions and comments.
	  </div>
  </div>
  <div class="span-4 last center">
    <a href="http://github.com"><img src="assets/images/github.png" alt="github logo"></a>
  </div>
  
</div>

<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-82337-12");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<script src="http://static.getclicky.com/40584.js" type="text/javascript"></script>
<noscript><p><img alt="Clicky" src="http://in.getclicky.com/40584-db6.gif" /></p></noscript>

</body>
</html>
