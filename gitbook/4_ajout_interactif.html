<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>Git Book - Ajout Interactif</title>
	<meta http-equiv="content-language" content="en">
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="icon" href="favicon.png" type="image/png">
	<link rel="stylesheet" href="assets/blueprint/screen.css" type="text/css" media="screen, projection">
  <link rel="stylesheet" href="assets/blueprint/print.css" type="text/css" media="print">
  <!--[if IE]><link rel="stylesheet" href="assets/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->
	<link rel="stylesheet" href="assets/stylesheets/mac_classic.css" type="text/css" media="screen, projection">
	<link rel="stylesheet" href="assets/stylesheets/style.css" type="text/css" media="screen, projection">
</head>

<body>
<div class="container chapter showgrids">

  <div class="span-21 header">
    <div class="nav"><a href="4_recombinaison_interactive.html">Prev</a>  <a href="4_le_cache_(stashing).html">Next</a></div>
    <div class="title"><a href='index.html'>Git Community Book</a></div>
  </div>
  
  <div class="span-21">
    <br/>
  </div>
  
  <div class="span-21">
    <h2>Ajout Interactif </h2>

<p>Il est vraiment intéressant de travailler et de visualiser l'index de Git avec
les ajouts interactifs. Pour le démarrer, tape simplement 'git add -i'. Git
vous montrera tous vos fichiers modifiés et leur état.</p>

<pre><code>$&gt;git add -i
           staged     unstaged path
  1:    unchanged        +4/-0 assets/stylesheets/style.css
  2:    unchanged      +23/-11 layout/book_index_template.html
  3:    unchanged        +7/-7 layout/chapter_template.html
  4:    unchanged        +3/-3 script/pdf.rb
  5:    unchanged      +121/-0 text/14_Interactive_Rebasing/0_ Interactive_Rebasing.markdown

*** Commands ***
  1: status   2: update   3: revert   4: add untracked
  5: patch    6: diff     7: quit     8: help
What now&gt; 
</code></pre>

<p>Dans ce cas, nous pouvons voir 5 fichiers modifiés qui n'ont pas encore étés
ajoutés à l'index (unstaged), et le nombre de lignes en plus ou en moins pour
chacun d'eux. Nous trouvons aussi un menu interactif avec les possibilités de
cet outils.</p>

<p>Si nous voulons rajouter les fichiers dans l'index, nous pouvons taper '2'
ou 'u' pour le mode de mise à jour (update). Après, nous devons sélectionner
les fichiers que nous voulons rajouter à l'index en saisissant les numéros
de ces fichiers (dans ce cas, 1-4):</p>

<pre><code>What now&gt; 2
           staged     unstaged path
  1:    unchanged        +4/-0 assets/stylesheets/style.css
  2:    unchanged      +23/-11 layout/book_index_template.html
  3:    unchanged        +7/-7 layout/chapter_template.html
  4:    unchanged        +3/-3 script/pdf.rb
  5:    unchanged      +121/-0 text/14_Interactive_Rebasing/0_ Interactive_Rebasing.markdown
Update&gt;&gt; 1-4
           staged     unstaged path
* 1:    unchanged        +4/-0 assets/stylesheets/style.css
* 2:    unchanged      +23/-11 layout/book_index_template.html
* 3:    unchanged        +7/-7 layout/chapter_template.html
* 4:    unchanged        +3/-3 script/pdf.rb
  5:    unchanged      +121/-0 text/14_Interactive_Rebasing/0_ Interactive_Rebasing.markdown
Update&gt;&gt; 
</code></pre>

<p>Si je presse 'entrée', je reviendrai au menu principal où je peux voir que
l'état des fichiers a changé.</p>

<pre><code>What now&gt; status
           staged     unstaged path
  1:        +4/-0      nothing assets/stylesheets/style.css
  2:      +23/-11      nothing layout/book_index_template.html
  3:        +7/-7      nothing layout/chapter_template.html
  4:        +3/-3      nothing script/pdf.rb
  5:    unchanged      +121/-0 text/14_Interactive_Rebasing/0_ Interactive_Rebasing.markdown
</code></pre>

<p>Maintenant nous voyons que les 4 premiers fichiers sont assemblés et que le
dernier ne l'est pas encore. Ces informations sont simplement une compression
de l'affichage obtenu avec la command 'git status':</p>

<pre><code>$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD &lt;file&gt;..." to unstage)
#
#   modified:   assets/stylesheets/style.css
#   modified:   layout/book_index_template.html
#   modified:   layout/chapter_template.html
#   modified:   script/pdf.rb
#
# Changed but not updated:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#
#   modified:   text/14_Interactive_Rebasing/0_ Interactive_Rebasing.markdown
#
</code></pre>

<p>Il y a quelques options utiles dans ce mode d'ajout interactif, comme
retirer des fichiers de l'index (3: revert), ajouter des fichier non-suivis
(4: add untracked), et voir les différences (6: view diff). Ces options
sont assez faciles à comprendre. Cependant, il y a une commande plutôt
cool qui demande des explications: l'assemblage de patches (5: patch).</p>

<p>Si vous tapez '5' ou 'p' dans le menu, git vous montrera vos différences
patch par patch (ou morceau par morceau) et vous demandera si vous voulez
assembler chacun d'eux. De cette façon, vous pouvez n'assembler qu'une
partie d'un fichier modifié. Si vous avez édité un fichier et ne voulez
committer qu'une partie des modifications et laisser les autres modifications
dans un état inachevé, ou séparer les commits de documentation de ceux des
changements plus conséquents, vous pouvez utiliser 'git add -i' pour le 
faire facilement.</p>

<p>Ici j'ai assemblé quelques changements au fichier book_index_template.html,
mais pas tous:</p>

<pre><code>         staged     unstaged path
1:        +4/-0      nothing assets/stylesheets/style.css
2:       +20/-7        +3/-4 layout/book_index_template.html
3:        +7/-7      nothing layout/chapter_template.html
4:        +3/-3      nothing script/pdf.rb
5:    unchanged      +121/-0 text/14_Interactive_Rebasing/0_ Interactive_Rebasing.markdown
6:    unchanged       +85/-0 text/15_Interactive_Adding/0_ Interactive_Adding.markdown
</code></pre>

<p>Quand vous avez terminer de modifier votre index avec 'git add -i',
il vous suffit de quitter (7: quit) et de lancer 'git commit' pour committer
les changements assemblés. Souvenez-vous de <strong>ne pas lancer</strong> 'git commit -a',
cela effacerait tous les précieuses sélections que vous avez faites dans le
mode interactif et committera tout d'un coup.</p>

<p><div class="gitcast">
        <embed src="http://gitcasts.com/flowplayer/FlowPlayerLight.swf?config=%7Bembedded%3Atrue%2CbaseURL%3A%27http%3A%2F%2Fgitcasts%2Ecom%2Fflowplayer%27%2CvideoFile%3A%27http%3A%2F%2Fmedia%2Egitcasts%2Ecom%2Fc3%2Dadd%2Dinteractive%2Eflv%27%2CautoBuffering%3Afalse%2CautoPlay%3Afalse%7D" width="620" height="445" scale="noscale" bgcolor="111111" type="application/x-shockwave-flash" allowFullScreen="true" allowScriptAccess="always" allowNetworking="all" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed>
        <br>"GitCast #3: Interactive Adding"
        </div></p>


  </div>
  
  <div class="span-21">
    <hr/>
    <div class="center"><a href="4_recombinaison_interactive.html">Prev</a>  <a href="4_le_cache_(stashing).html">Next</a></div>
    <hr/>
  </div>
  
  <div class="span-17 footer">
  	<div class="menu">
  		This book is maintained by Scott Chacon, and hosting is donated by GitHub.
  		<br>
  		Please email me at <a href="mailto:schacon@gmail.com">schacon@gmail.com</a>
  		with patches, suggestions and comments.
	  </div>
  </div>
  <div class="span-4 last center">
    <a href="http://github.com"><img src="assets/images/github.png" alt="github logo"></a>
  </div>
  
</div>

<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-82337-12");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<script src="http://static.getclicky.com/40584.js" type="text/javascript"></script>
<noscript><p><img alt="Clicky" src="http://in.getclicky.com/40584-db6.gif" /></p></noscript>

</body>
</html>
