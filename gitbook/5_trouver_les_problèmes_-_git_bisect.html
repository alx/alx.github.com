<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>Git Book - Trouver les Problèmes - Git Bisect</title>
	<meta http-equiv="content-language" content="en">
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="icon" href="favicon.png" type="image/png">
	<link rel="stylesheet" href="assets/blueprint/screen.css" type="text/css" media="screen, projection">
  <link rel="stylesheet" href="assets/blueprint/print.css" type="text/css" media="print">
  <!--[if IE]><link rel="stylesheet" href="assets/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->
	<link rel="stylesheet" href="assets/stylesheets/mac_classic.css" type="text/css" media="screen, projection">
	<link rel="stylesheet" href="assets/stylesheets/style.css" type="text/css" media="screen, projection">
</head>

<body>
<div class="container chapter showgrids">

  <div class="span-21 header">
    <div class="nav"><a href="5_branches_et_merges_avancés.html">Prev</a>  <a href="5_trouver_les_problèmes_-_git_blame.html">Next</a></div>
    <div class="title"><a href='index.html'>Git Community Book</a></div>
  </div>
  
  <div class="span-21">
    <br/>
  </div>
  
  <div class="span-21">
    <h2>Trouver les Problèmes - Git Bisect </h2>

<p>Supposons que la version 2.6.18 de votre project fonctionne correctement,
mais que la version sur la branche "master" plante. Parfois, la meilleure
façon de trouver la cause d'une telle régression est de faire de la recherche
brutale dans l'historique de votre projet pour trouver un commit en particulier
responsable du problème. La commande <a href="http://www.kernel.org/pub/software/scm/git/docs/git-bisect.html">git bisect</a> peut vous aider
dans cette démarche:</p>

<pre><code>$ git bisect start
$ git bisect good v2.6.18
$ git bisect bad master
Bisecting: 3537 revisions left to test after this
[65934a9a028b88e83e2b0f8b36618fe503349f8e] BLOCK: Make USB storage depend on SCSI rather than selecting it [try #6]
</code></pre>

<p>Si vous lancez "git branch" à ce moment, vous verrez que git vous
a temporairement déplacé sur une nouvelle branche nommée "bisect".
Cette branche pointe vers un commit (avec l'identifiant 65934...)
qui est accessible depuis "master" mais pas depuis v2.6.18.
Compilez et testez votre projet pour voir quand il plante.
En assument qu'il plante. Ensuite:</p>

<pre><code>$ git bisect bad
Bisecting: 1769 revisions left to test after this
[7eff82c8b1511017ae605f0c99ac275a7e21b867] i2c-core: Drop useless bitmaskings
</code></pre>

<p>récupère une version plus ancienne. Continuez comme ça, en disant
à chaque fois à git sit la version qu'il vous donne est bonne ou mauvaise,
et divisant par deux le nombre de révisions à tester à chaque étape.</p>

<p>Après environ 13 test (dans ce cas), il vous montrera l'identifiant du commit
qui pose problème. Vous pouvez examiner ce commit avec <a href="http://www.kernel.org/pub/software/scm/git/docs/git-show.html">git show</a>,
trouver qui a publié ce commit, et lui envoyer votre rapport de bug
par mail avec l'identifiant du commit concerné. Pour terminer, lancez:</p>

<pre><code>$ git bisect reset
</code></pre>

<p>pour revenir à la branche sur laquelle vous vous trouviez et
effacer la branche temporaire "bisect".</p>

<p>La version que git-bisect vous récupère à chaque étape n'est qu'une suggestion,
et vous pouvez choisir une version différente si vous pensez que c'est une
meilleure idée. Par exemple, vous tomberez parfois sur un commit qui pose
un problème qui ne concerne pas notre débuggage; lancez:</p>

<pre><code>$ git bisect visualize
</code></pre>

<p>qui affichera gitk et marquera les commits qu'il choisira avec une étiquette
"bisect". Choisissez un commit qui vous parait sûr, notez l'identifiant du
commit, et récupérez le avec:</p>

<pre><code>$ git reset --hard fb47ddb2db...
</code></pre>

<p>puis testez, lancez "bisect good" ou "bisect bad" comme il convient,
et continuez.</p>


  </div>
  
  <div class="span-21">
    <hr/>
    <div class="center"><a href="5_branches_et_merges_avancés.html">Prev</a>  <a href="5_trouver_les_problèmes_-_git_blame.html">Next</a></div>
    <hr/>
  </div>
  
  <div class="span-17 footer">
  	<div class="menu">
  		This book is maintained by Scott Chacon, and hosting is donated by GitHub.
  		<br>
  		Please email me at <a href="mailto:schacon@gmail.com">schacon@gmail.com</a>
  		with patches, suggestions and comments.
	  </div>
  </div>
  <div class="span-4 last center">
    <a href="http://github.com"><img src="assets/images/github.png" alt="github logo"></a>
  </div>
  
</div>

<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-82337-12");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<script src="http://static.getclicky.com/40584.js" type="text/javascript"></script>
<noscript><p><img alt="Clicky" src="http://in.getclicky.com/40584-db6.gif" /></p></noscript>

</body>
</html>
